---
const date = new Date().toUTCString();
const gitCommit = import.meta.env.COMMIT || "???";
const repo = 'https://github.com/lbeckman314/lbeckman314.github.io'
const commitLink = gitCommit !== "???" ? `${repo}/commit/${gitCommit}` : `${repo}/commits/`;
---

<div id="footer">
  <footer class="site-footer">
    <div>
      <a href="https://github.com/lbeckman314/lbeckman314.github.io/actions"
        >made with lots of <object
          type="image/svg+xml"
          data="/assets/svg/heart.svg"></object></a
      > ~ <a href="https://www.github.com/lbeckman314/website"
        >open-source and free</a
      >

      <span>
        ~
        {commitLink ? (
          <a href={commitLink} target="_blank" rel="noopener">{gitCommit}</a>
        ) : (
          <span>{gitCommit}</span>
        )}
      </span>

    </div>

    <div>
      <span>Â© </span><a href="/now" id="date">{date}</a>

      <span class="quote"
        ><a href="/assets/images/moomin.jpg"
          >"I only want to live in peace and plant potatoes and dream!" -Tove
          Jansson</a
        ><span> </span>
      </span>

    </div>
  </footer>

  <script>
    function updateDate() {
      const dateElement = document.getElementById("date");
      if (dateElement) {
        const now = new Date();

        // Get timezone name
        const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;

        const formatted = new Intl.DateTimeFormat("en-US", {
          year: "numeric",
          month: "short",
          day: "numeric",
          hour: "2-digit",
          minute: "2-digit",
          second: "2-digit",
          timeZone: timezone,
          timeZoneName: "short",
        }).format(now);

        dateElement.textContent = formatted;
      }
    }

    updateDate();
    setInterval(updateDate, 1000);
  </script>
  
  <style>
    .edit-link {
      color: #666;
      text-decoration: none;
      font-size: 0.9rem;
      opacity: 0.8;
      transition: opacity 0.2s;
    }

    .edit-link:hover {
      opacity: 1;
    }
    
    .edit-link-separator {
      margin: 0 0.5rem;
    }
  </style>
</div>
